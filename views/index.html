<!DOCTYPE html>
<html>
    <head>
        <title>Kalkulator Zakat Maal</title>
        <script src="static/jquery-1.12.0.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
        <script>
            $(function () {
            	$("#user-form").on("submit", function (e) {
				    e.preventDefault();

				    var $self = $(this);
				    var payload = JSON.stringify({
				        gold_value: parseInt($('[name="gold_value"]').val(), 10),
				        wealth: parseInt($('[name="wealth"]').val(), 10),
				        line_name: $('[name="line_name"]').val()
				    });

				    $.ajax({
				        url: $self.attr("action"),
				        type: $self.attr("method"),
				        data: payload,
				        contentType: 'application/json',
				    }).then(function (res) {
				        $(".message").text(res);
				    }).catch(function (a) {
				        alert("ERROR: " + a.responseText);
				    });
				});
            });
        </script>
    </head>
    <body>
    	<h3 class="zakat_harta">Zakat Maal</h3>
    	<div class="info_zakat_harta">
			<p>Zakat Harta atau Zakat Maal adalah sejumlah harta yang wajib dikeluarkan bila telah mencapai batas minimal tertentu (nisab) dalam kurun waktu (haul) setiap satu tahun kalender. Nisab Zakat Maal adalah setara dengan 85 gr emas 24 karat.</p>
		</div>
        <p class="message"></p>
        <form id="user-form" method="post" action="/save">
        	<table noborder>
			    <tr>
			        <td><label>Total Harta :</label></td>
			        <td>
			            <input required type="number" name="wealth" placeholder="Total Harta" />
			        </td>
			    </tr>
			    	<input id="displayNameField" type="hidden" name="line_name" value="">
			    <tr>
			        <td colspan="2" style="text-align: right;">
			            <button type="submit">Save</button>
			        </td>
			    </tr>
			</table>
        </form>
        <div id="liffAppContent">
            <div class="buttonGroup">
                <button id="liffLoginButton">Log in</button>
                <button id="liffLogoutButton">Log out</button>
            </div>
        </div>
        <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
        <script src="static/liff-starter.js"></script>
        <!-- <script type="text/javascript">
        	document.getElementById('displayNameField').value = "beban";
        </script> -->
    </body>
</html>